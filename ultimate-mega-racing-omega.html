<!DOCTYPE html><html>
<head>
<meta charset="UTF-8">
<title>Ultimate Mega Racing Omega</title>
<style>
body { margin:0; background:#000; overflow:hidden; font-family:Arial; }
canvas { display:block; margin:auto; background:#1a1a1a; border:3px solid white; }#menu { position:fixed; inset:0; display:flex; flex-direction:column; justify-content:center; align-items:center; background:#000d; color:white; text-align:center; }

button { padding:12px 25px; margin:8px; font-size:18px; border:none; border-radius:8px; cursor:pointer; }

.controls { position:fixed; bottom:10px; width:100%; text-align:center; } </style>

</head><body><div id="menu">
<h1>Ultimate Mega Racing Œ©</h1>
<p>Dynamic weather ‚Ä¢ Police AI ‚Ä¢ Boss fights ‚Ä¢ Upgrades</p>
<button onclick="startGame()">Start Game</button>
</div><canvas id="game" width="1000" height="500"></canvas>

<div class="controls">
<button onclick="moveUp()">‚¨Ü</button>
<button onclick="moveDown()">‚¨á</button>
<button onclick="nitroBoost()">‚ö°</button>
<button onclick="shoot()">üî´</button>
<button onclick="togglePause()">‚è∏</button>
</div><script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
const menu = document.getElementById("menu");

let player, enemies, bullets, particles;
let score=0, level=1;
let speed=5, nitro=100;
let health=100;
let gameOver=false, paused=false;
let weather="clear";
let roadOffset=0;
let highScore = localStorage.getItem("omegaHigh")||0;

function startGame(){
menu.style.display="none";
init();
}

function init(){
player={x:120,y:230,w:60,h:35};
enemies=[];
bullets=[];
particles=[];
score=0; level=1;
speed=5; nitro=100; health=100;
gameOver=false; paused=false;
setInterval(changeWeather,15000);
}

function changeWeather(){
const types=["clear","rain","storm"];
weather=types[Math.floor(Math.random()*types.length)];
}

function drawWeather(){
if(weather==="rain"||weather==="storm"){
ctx.strokeStyle="rgba(180,180,255,0.5)";
for(let i=0;i<40;i++){
let x=Math.random()*canvas.width;
let y=Math.random()*canvas.height;
ctx.beginPath();
ctx.moveTo(x,y);
ctx.lineTo(x-3,y+10);
ctx.stroke();
}
}
if(weather==="storm"){
ctx.fillStyle="rgba(255,255,255,0.1)";
ctx.fillRect(0,0,canvas.width,canvas.height);
}
}

function drawRoad(){
ctx.fillStyle="#333";
ctx.fillRect(0,0,canvas.width,canvas.height);
ctx.strokeStyle="white";
ctx.setLineDash([30,20]);
roadOffset-=speed;
if(roadOffset<-50) roadOffset=0;
ctx.beginPath();
ctx.moveTo(0,canvas.height/2+roadOffset);
ctx.lineTo(canvas.width,canvas.height/2+roadOffset);
ctx.stroke();
}

function drawCar(x,y,w,h,color){
let g=ctx.createLinearGradient(x,y,x+w,y+h);
g.addColorStop(0,color);
g.addColorStop(1,"black");
ctx.fillStyle=g;
ctx.fillRect(x,y,w,h);
}

function spawnEnemy(){
if(gameOver||paused) return;
let type=Math.random()<0.2?"police":"traffic";
enemies.push({
x:canvas.width,
y:Math.random()*(canvas.height-40),
w:60,h:35,
type:type
});
}
setInterval(spawnEnemy,900);

function shoot(){ if(!paused) bullets.push({x:player.x+60,y:player.y+15,w:10,h:4}); }

function nitroBoost(){
if(nitro>10 && !paused){ speed+=5; nitro-=10; setTimeout(()=>speed-=5,400); }
}

function togglePause(){ paused=!paused; }

function explode(x,y){
for(let i=0;i<15;i++){
particles.push({x,y,vx:Math.random()*4-2,vy:Math.random()*4-2,life:30});
}
}

function updateParticles(){
for(let i=0;i<particles.length;i++){
let p=particles[i];
p.x+=p.vx; p.y+=p.vy; p.life--;
ctx.fillStyle="orange";
ctx.fillRect(p.x,p.y,3,3);
if(p.life<=0) particles.splice(i,1);
}
}

function updateLevel(){
level=1+Math.floor(score/10);
speed=5+level;
}

function update(){
ctx.clearRect(0,0,canvas.width,canvas.height);
drawRoad();
drawWeather();

if(!gameOver && !paused){

drawCar(player.x,player.y,player.w,player.h,"red");

for(let b of bullets){ b.x+=10; ctx.fillStyle="yellow"; ctx.fillRect(b.x,b.y,b.w,b.h); }

for(let i=0;i<enemies.length;i++){
let e=enemies[i];

if(e.type==="police"){
e.x-=speed+2;
ctx.fillStyle="blue";
}else{
e.x-=speed;
ctx.fillStyle="cyan";
}

drawCar(e.x,e.y,e.w,e.h,ctx.fillStyle);

if(player.x<e.x+e.w && player.x+player.w>e.x && player.y<e.y+e.h && player.y+player.h>e.y){
health-= e.type==="police"?20:10;
explode(e.x,e.y);
enemies.splice(i,1);
if(health<=0) gameOver=true;
}

for(let j=0;j<bullets.length;j++){
let b=bullets[j];
if(b.x<e.x+e.w && b.x+b.w>e.x && b.y<e.y+e.h && b.y+b.h>e.y){
explode(e.x,e.y);
enemies.splice(i,1);
bullets.splice(j,1);
score+= e.type==="police"?2:1;
nitro=Math.min(100,nitro+2);
updateLevel(); break;
}
}

if(e.x<-60){ enemies.splice(i,1); score++; updateLevel(); }
}
}

updateParticles();

if(score>highScore){ highScore=score; localStorage.setItem("omegaHigh",highScore); }

ctx.fillStyle="white";
ctx.font="18px Arial";
ctx.fillText("Score: "+score,20,25);
ctx.fillText("Level: "+level,20,50);
ctx.fillText("Health: "+health,20,75);
ctx.fillText("Nitro: "+nitro,20,100);
ctx.fillText("Weather: "+weather,20,125);
ctx.fillText("High: "+highScore,20,150);

if(paused && !gameOver){ ctx.fillStyle="yellow"; ctx.font="40px Arial"; ctx.fillText("PAUSED",canvas.width/2-90,canvas.height/2); }

if(gameOver){
ctx.fillStyle="red"; ctx.font="50px Arial";
ctx.fillText("GAME OVER",canvas.width/2-170,canvas.height/2);
ctx.font="20px Arial";
ctx.fillText("Press R to Restart",canvas.width/2-90,canvas.height/2+40);
}

requestAnimationFrame(update);
}
update();

document.addEventListener("keydown",e=>{
if(e.key==="ArrowUp") player.y-=20;
if(e.key==="ArrowDown") player.y+=20;
if(e.key===" ") nitroBoost();
if(e.key==="x") shoot();
if(e.key==="p") togglePause();
if(e.key==="r" && gameOver) init();
});

function moveUp(){player.y-=25;}
function moveDown(){player.y+=25;}

</script></body>
</html>
